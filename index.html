<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Test Interactivo – 2º DAW</title>

    <!-- Fuente moderna y CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
    <div class="wrapper">
        <div class="app">

            <!-- ======================= CABECERA ======================= -->
            <header class="header">
                <h1 id="quiz-title">Test interactivo</h1>
                <p id="quiz-desc">Responde a todas las preguntas y pulsa «Enviar» para ver tu puntuación.</p>

                <div class="progress" aria-hidden="true"><span id="progress-bar"></span></div>
                <div class="progress-meta">
                    <span id="progress-label">0 / 0 respondidas</span>
                    <span id="points-label">0 puntos</span>
                </div>
            </header>

            <!-- ======================= TOOLBAR ======================= -->
            <section class="toolbar">
                <div class="left-group">
                    <select id="cursoSelect" class="select-curso">
                        <option value="">-- Elegir tema --</option>
                        <option value="Temas/Cliente.json">Programación Cliente</option>
                        <option value="Temas/Servidor.json">Programación Servidor</option>
                        <option value="Temas/Despliegue.json">Despliegue</option>
                        <option value="Temas/Sostenibilidad.json">Sostenibilidad</option>
                        <option value="Temas/IPE.json">IPE (Entorno Profesional)</option>
                        <option value="Temas/Interfazes.json">Diseño de Interfaces</option>
                        <option value="Temas/Digitalizacion.json">Digitalización</option>
                    </select>
                </div>

                <div class="right-group">
                    <button class="btn-outline" id="export-json">📤 Exportar plantilla</button>
                    <button class="btn-ghost" id="reset">♻️ Reiniciar</button>
                    <label class="pill">
                        <input type="checkbox" id="shuffle" style="margin-right:8px">Barajar preguntas
                    </label>
                </div>
            </section>

            <!-- ======================= GENERADOR DE TEST ======================= -->
            <section class="pdf-section card">
                <label for="pdfInput" class="pdf-label">📄 Cargar temario PDF</label>
                <input id="pdfInput" type="file" accept="application/pdf" />
                <button id="generarTest" class="btn">⚙️ Generar test desde PDF</button>
                <span id="pdfFileName" class="helper"></span>
                <pre id="output"></pre>
            </section>

            <!-- ======================= TEST ======================= -->
            <main id="quiz" class="card" aria-live="polite">
                <p class="helper">Selecciona o carga un cuestionario para comenzar.</p>
            </main>

            <!-- ======================= CONTROLES ======================= -->
            <nav class="controls">
                <button id="prev" class="btn-outline">← Anterior</button>
                <button id="next" class="btn-outline">Siguiente →</button>
                <button id="submit" class="btn">Enviar</button>
            </nav>

            <!-- ======================= RESULTADOS ======================= -->
            <section id="result" class="card result">
                <div class="result-header">
                    <span class="pill">Resultado</span>
                    <span class="score" id="score"></span>
                </div>

                <p id="summary" class="helper"></p>
                <div class="divider"></div>
                <div id="review"></div>

                <div class="controls">
                    <button id="retry" class="btn-outline">Reintentar</button>
                    <button id="download-csv" class="btn-outline">Descargar CSV</button>
                    <button id="print" class="btn">Imprimir</button>
                </div>

                <p class="footer-note">Consejo: puedes volver arriba y pulsar «Reiniciar» para empezar desde cero.</p>
            </section>

            <!-- ======================= PIE ======================= -->
            <footer class="footer-note">
                Hecho con 💜 y JavaScript puro —
                <strong>Iker Martínez Velasco</strong> © 2025
                <br>
                <span class="brand">Despliegue y Arquitectura Web · 2º DAW</span>
            </footer>
        </div>
    </div>

    <!-- ======================= SCRIPTS ======================= -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        window.pdfjsLib = window['pdfjs-dist/build/pdf'];
        pdfjsLib.GlobalWorkerOptions.workerSrc =
            'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <!-- Scripts principales -->
    <script src="testGenerator.js"></script>
    <script src="main.js"></script>
</body>

</html>